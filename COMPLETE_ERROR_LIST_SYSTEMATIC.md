# COMPLETE TypeScript Errors & Warnings - SYSTEMATIC FIX LIST
**Date**: 2025-07-30  
**Total**: ~~493~~ ~~461~~ ~~433~~ ~~346~~ ~~473~~ ~~349~~ ~~341~~ 384 errors + 108 warnings âš ï¸ (Phase 8 PARTIAL: Some fixes added new errors, need to identify and fix)

## ğŸ¯ SYSTEMATIC FIX ORDER - ONE BY ONE

### âœ… PHASE 1: Translation Keys (32 errors) - COMPLETED! 
**Missing translation keys in messages/en.json:**
- [x] `cannot_close_during_payment` âœ…
- [x] `card_payment` âœ…
- [x] `complete_payment_via_revolut` âœ…
- [x] `confirming_payment` âœ…
- [x] `create_payment_request` âœ…
- [x] `creating_payment` âœ…
- [x] `expires_at` âœ…
- [x] `i_have_completed_payment` âœ…
- [x] `important_notice` âœ…
- [x] `include_payment_reference_notice` âœ…
- [x] `loading_card_form` âœ…
- [x] `loading_payment_form` âœ…
- [x] `manual_payment_instructions` âœ…
- [x] `manual_payment_security_notice` âœ…
- [x] `manual_verification` âœ…
- [x] `order_id` âœ…
- [x] `pay_with_revolut` âœ…
- [x] `payment_details` âœ…
- [x] `payment_expired` âœ…
- [x] `payment_expired_message` âœ…
- [x] `payment_form_load_error` âœ…
- [x] `payment_reference` âœ…
- [x] `payment_security_notice` âœ…
- [x] `processing_please_wait` âœ…
- [x] `revolut_manual_description` âœ…
- [x] `revolut_manual_process_description` âœ…
- [x] `revolut_payment` âœ…
- [x] `revolut_security_notice` âœ…
- [x] `state_province` âœ…
- [x] `stripe_card_description` âœ…
- [x] `stripe_security_description` âœ…
- [x] `stripe_security_notice` âœ…

### âœ… PHASE 2: Object is possibly 'undefined' (28 errors) - COMPLETED!
- [x] `src/lib/components/category/CategoryLanding.svelte:197` âœ…
- [x] `src/lib/components/category/TopThreeSellers.svelte:40` âœ…
- [x] `src/lib/components/common/LazyAvatar.svelte:46` âœ…
- [x] `src/lib/components/messaging/ConversationList.svelte:151` âœ…
- [x] `src/lib/components/messaging/ConversationListEnhanced.svelte:145` âœ…
- [x] `src/lib/components/messaging/MessageSearch.svelte:198` âœ…
- [x] `src/lib/components/onboarding/WelcomeModal.svelte:76,77,78` âœ…
- [x] `src/lib/components/shared/UnifiedFilter.svelte:483,899,915,1064,1068,1086,1105,1109` âœ…
- [x] `src/lib/components/upload/ImageUpload.svelte:231` âœ…
- [x] `src/routes/(auth)/register/+page.svelte:104` âœ…
- [x] `src/lib/utils/focus-trap.ts:218` âœ…
- [x] `src/lib/utils/format.ts:31,34` âœ…
- [x] `src/lib/utils/image-compression.ts:202` âœ…
- [x] `src/routes/(auth)/register/+page.server.ts:138` âœ…

### âœ… PHASE 3: Type Assignment Errors (87 errors) - COMPLETED!
**Most common patterns:**
- [x] `Type 'string | undefined' is not assignable to type 'string'` âœ…
- [x] `Type 'null' is not assignable to type 'string'` âœ…
- [x] `Type 'X[]' is not assignable to type 'Y[]'` âœ…
- [x] Other type assignment errors âœ…

### âœ… PHASE 4: RPC Parameter Name Fixes (16 errors) - COMPLETED!
**Wrong parameter names in RPC calls:**
- [x] `p_user_id` â†’ `user_id` (10 occurrences) âœ…
- [x] `p_order_id` â†’ `order_id` (6 occurrences) âœ…
- [x] `p_category_id` â†’ `category_slug` (2 occurrences) âœ…
- [x] `category_uuid` â†’ `category_slug` (1 occurrence) âœ…
- [x] Fixed bonus: `p_limit/p_offset` â†’ `limit_count/offset_count` in wishlist âœ…

### âœ… PHASE 5: Component/Module Import Errors (15+ errors) - COMPLETED!
- [x] Remove `.ts` extension from imports âœ…
- [x] Fix Category type imports - replaced with `UnifiedCategory as Category` âœ…
- [x] Fix `auth` not found errors (9 occurrences) âœ…
- [x] Fix `_page` import (should be `page`) âœ…
- [x] Fix TurnstileWrapper syntax errors (import.meta, scale value) âœ…

### âœ… PHASE 6: SelectQueryError Type Issues (124 errors fixed!) - COMPLETED!
**File: `src/routes/(app)/brands/[slug]/+page.svelte`**
- [x] Property access on potentially errored queries âœ…
- [x] Need type guards for query results âœ…
- [x] Added comprehensive `isValidData` function to check SelectQueryError types âœ…
- [x] Fixed all 49+ property access errors with proper type guards âœ…
- [x] Added safe fallbacks for all data types âœ…
- [x] Fixed related import issues (removed invalid icon imports) âœ…
- [x] Modernized to Svelte 5 patterns (removed deprecated svelte:component) âœ…
- [x] **TOTAL IMPACT: 124 errors eliminated** âœ…

### âœ… PHASE 7: Component Props & Types (8 errors fixed!) - COMPLETED!
- [x] `closeOnEscape` doesn't exist on sheet component âœ… (Removed unsupported prop from sheet.svelte)
- [x] `enableNavigationSpans` doesn't exist in Sentry config âœ… (Removed from hooks.client.ts browserTracingIntegration)
- [x] `maxRetries` doesn't exist in Sentry transport âœ… (Removed from hooks.client.ts transportOptions)
- [x] Badge variant index signature errors (2) âœ… (Fixed with safe variant access function in badge.svelte)
- [x] QuickFilter variant type mismatches (4) âœ… (Added proper type annotations to HeroSearch components)

### ğŸŸ¡ PHASE 8: Form & Error Handling - PARTIAL SUCCESS âš ï¸
- [x] `error` is of type 'unknown' errors âœ… (Fixed ProfileSetupWizard.svelte, sell page.server.ts) 
- [x] Form action type mismatches âœ… (Fixed login page ActionFailure, CSRF wrapper types)
- [x] Missing return values in effects âœ… (Fixed Header.svelte async effect, listings page PromiseLike)
- [!] **ISSUE**: Added ~43 new errors (384 vs 341) - some fixes introduced new problems
- [ ] **TODO**: Identify and fix the 43 new errors introduced

### ğŸ”´ PHASE 9: Syntax Errors (17 "Unexpected token" errors)
**Files with syntax issues:**
- [ ] `src/lib/components/auth/TurnstileWrapper.svelte:69`
- [ ] `src/lib/components/profile/ProfileStats.svelte:208`
- [ ] `src/lib/components/profile/SocialMediaLinks.svelte:7`
- [ ] Multiple auth pages with syntax errors

### ğŸ”´ PHASE 10: Miscellaneous Type Fixes
- [ ] `auth.user` doesn't exist on type Locals (5)
- [ ] Missing `Category.id` property (8)
- [ ] Function comparison errors in UnifiedFilter (7)
- [ ] Invalid self-closing tags
- [ ] Button inside button warnings

## ğŸŸ¡ ACCESSIBILITY WARNINGS (104 total)

### Phase A: Click Event Handlers (19 warnings)
- [ ] Add keyboard handlers to all clickable elements
- [ ] Add `onkeydown` alongside `onclick`

### Phase B: ARIA Attributes (30+ warnings)
- [ ] Add `aria-label` to icon-only buttons
- [ ] Associate labels with form controls
- [ ] Add required ARIA props to roles

### Phase C: Interactive Elements (20+ warnings)
- [ ] Add tabindex to interactive elements
- [ ] Add ARIA roles to static elements with handlers

### Phase D: Svelte 5 Updates (15 warnings)
- [ ] Replace `<svelte:component>` with direct component
- [ ] Update variables to use `$state()`
- [ ] Fix HTML nesting (button inside button)

## ğŸ“Š EXECUTION STRATEGY

1. **Start with Phase 1** - Add all 32 translation keys (30 min)
2. **Phase 2** - Fix undefined objects with optional chaining (1 hour)
3. **Phase 3** - Fix type assignments systematically (2 hours)
4. **Phase 4** - Fix RPC parameter names (30 min)
5. **Phase 5** - Fix imports and exports (30 min)
6. **Phase 6** - Fix the brands page mega-error file (1 hour)
7. **Phases 7-10** - Remaining specific fixes (2 hours)
8. **Accessibility** - Add keyboard handlers and ARIA (1.5 hours)

**Total estimated time**: 8.5 hours

## ğŸš€ LET'S START WITH PHASE 1!